name: Deploy Nginx on Self-hosted Runner

on: [push]

jobs:
  deploy-nginx:
    runs-on: self-hosted # Ensure this matches the label of your self-hosted runner

    steps:
    - name: Check out repository code
      uses: actions/checkout@v2

    - name: Install Nginx
      run: sudo apt-get update && sudo apt-get install -y nginx

    - name: Start Nginx
      run: sudo systemctl start nginx

    - name: Enable Nginx to start on boot
      run: sudo systemctl enable nginx

    - name: Print the status of Nginx
      run: sudo systemctl status nginx | cat # Using 'cat' to avoid failing due to 'systemctl' exit codes
